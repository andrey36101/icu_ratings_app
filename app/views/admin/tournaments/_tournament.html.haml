%table{class: "right-headers cushioned"}
  %tr
    %th Name
    %td= link_to_if @tournament.site =~ /^http/, @tournament.name, @tournament.site, class: "external", target: "_external"
    - if can? :edit, @tournament
      %td{class: "floater top", rowspan: 9}
        = link_to edit_admin_tournament_path(@tournament), remote: true do
          = icon_tag "edit", "Edit Tournament"
  %tr
    %th Start Date
    %td= @tournament.start
  %tr
    %th End Date
    %td= @tournament.finish
  %tr
    %th Rounds
    %td= @tournament.rounds
  %tr
    %th Federation
    %td= @tournament.fed
  %tr
    %th City
    %td= @tournament.city
  %tr
    %th Arbiter
    %td= @tournament.arbiter
  %tr
    %th Deputy
    %td= @tournament.deputy
  %tr
    %th Time Control
    %td= @tournament.time_control
  %tr
    %th Tie Break Rules
    %td{id: "show_tie_breaks"}= @tournament.tie_breaks
    - if can? :edit, @tournament
      %td{class: "floater"}
        = link_to edit_admin_tournament_path(@tournament, tie_breaks: ""), remote: true do
          = icon_tag "edit", "Edit Tie Breaks"
  %tr
    %th Ranking
    %td{id: "show_ranking"}= @tournament.ranking_summary.fetch(:description)
    - if can? :edit, @tournament
      %td{class: "floater top", rowspan: 2}
        = link_to edit_admin_tournament_path(@tournament, ranks: ""), remote: true do
          = icon_tag "rank", "Rank Tournament"
  %tr
    %th Upload
    %td= @tournament.upload ? link_to(@tournament.upload.created_at.strftime('%Y-%m-%d'), [:admin, @tournament.upload]) : ''
  %tr
    %th Reporter
    %td= @tournament.user.name
    - if can? :manage, @tournament
      %td{class: "floater top", rowspan: 2}
        = link_to edit_admin_tournament_path(@tournament, reporter: ""), remote: true do
          = icon_tag "edit", "Change Reporter"
  %tr
    %th Status
    - if @tournament.status_ok?
      %td= t(@tournament.status)
    - else
      %td{class: "error centered"}
        %a{href: "javascript: $('#dialog_status').dialog('open'); void(0)"}= t("problems")
  %tr
    %th Stage
    %td{id: "show_stage"}= t(@tournament.stage)
    %td{class: "floater top"}
      - if can?(:edit, @tournament) && @tournament.move_stage_options(current_user).size > 0
        = link_to edit_admin_tournament_path(@tournament, stage: ""), remote: true do
          = icon_tag "edit", "Update Stage"
  - if last_tournament = @tournament.last_tournament
    %tr
      %th Last Tournament
      %td= link_to last_tournament.name, [:admin, last_tournament]
      %td{class: "floater"}
  - if next_tournament = @tournament.next_tournament
    %tr
      %th Next Tournament
      %td= link_to next_tournament.name, [:admin, next_tournament]
      %td{class: "floater"}

%table
  %tr
    %td{class: "centered"}
      = link_to "Display", @tournament
      &bullet;
      = link_to "Export", admin_tournament_path(@tournament, format: "js"), remote: true
      - if can?(:modify, @tournament) && @tournament.deletable?
        &bullet;
        = link_to "Delete", [:admin, @tournament], confirm: "Are you sure?", method: :delete
