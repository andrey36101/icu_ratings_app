- content_for :title, "Downloads"

.header
  %span Downloads

%table
  %tr
    %th File Name
    %th Comment
    %th Content Type
    %th Size
    %th Created Ago
    %th Updated Ago
    - if can? :manage, Download
      %td{:class => "floater"}
  - if @downloads.count == 0
    %tr
      %td{:colspan => 6, :class => "centered"} None
      - if can? :manage, Download
        %td{:class => "floater"}
  - else
    - @downloads.matches.each do |download|
      %tr
        %td= link_to download.file_name, download
        %td= download.comment
        %td= download.content_type
        %td= number_to_human_size(download.data.size)
        %td= time_ago_in_words(download.created_at, true)
        %td= time_ago_in_words(download.updated_at, true)
        - if can? :manage, Download
          %td{:class => "floater"}
            = link_to edit_download_path(download) do
              = image_tag "icons/edit.png", :alt => "Edit Download"
            = link_to download, :method => "delete", :confirm => "Are you sure you want to delete this download?" do
              = image_tag "icons/bin.png", :alt => "Delete Download"
  - if @downloads.multi_page
    %tr
      %td{:colspan => 6, :class => "centered"}= pagination_links(@downloads)
      - if can? :manage, Download
        %td{:class => "floater"}
